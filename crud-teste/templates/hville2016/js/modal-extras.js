$(function(){var a=$("body");window.generateModalTemplate=function(t,e){var l=$('<div id="dynamic-modal" class="modal fade">            <div class="modal-dialog">            <div class="modal-btn-close btn-close" data-dismiss="modal"></div>            <div id="modal-content" class="modal-content"></div>            </div>            </div>');t&&l.find(".modal-content").html(t),e&&l.addClass(e),l.prependTo(a).modal(),l.on("hidden.bs.modal",function(a){l.remove()})},a.on("keyup",function(a){27===a.keyCode&&$(".modal-btn-close").trigger("click")}),$("[data-toggle=modal-html]").on("click",function(a){a.preventDefault();var t=$(this),e=t.data("id"),l=t.data("class")||"",o=$("#"+e).clone();generateModalTemplate(o,l)}),$("[data-toggle=modal-ajax]").on("click",function(a){a.preventDefault();var t=$(this),e=t.attr("href"),l=t.data("class")||"",o=t.data("id");void 0!==o&&(e=e+" #"+o),generateModalTemplate("","modal-ajax modal-loading "+l);var i=$("#modal-content");i.load(e,function(a,t,e){$("#dynamic-modal").removeClass("modal-loading"),"error"==t&&(alert("there was an error loading the URL"),removeModal())})}),$("[data-toggle=modal-image]").on("click",function(a){a.preventDefault();var t=$(this),e=t.attr("href"),l=t.attr("title")||"",o=t.data("class")||"",i=$('<img class="modal-image" id="modal-image" />').attr({src:e,alt:l});if(i.load(function(){$("#dynamic-modal").removeClass("modal-loading")}),generateModalTemplate(i,"modal-image-wrapper modal-loading "+o),t.attr("data-instagram")){var n=t.attr("data-userphoto"),d=t.attr("data-username"),r=t.attr("data-location"),s=t.attr("data-likes"),m=t.attr("data-caption"),c=t.attr("data-link");instagramDataHTML="<div class='modal-image-instagram-container'><div class='user-section'><img src='"+n+"' class='instagram-userphoto' /><div class='user-info'><span class='username'>"+d+"</span><span class='location'>"+r+"</span></div><a href="+c+" class='btn btn-sm btn-instagram' target='_blank'>Follow</a></div><span class='image-likes'>"+s+"</span><span class='image-caption'>"+m+"</span></div>",$(".modal-content").append(instagramDataHTML)}else if(t.attr("data-caption")){var p=t.attr("data-caption"),g="<div class='modal-image-caption-wrapper'><span class='modal-image-caption'>"+p+"</span></div>";$(".modal-content").append(g)}if($(this).attr("data-link")){var v=t.attr("data-link"),f="<a href='"+v+"' class='modal-image-link' target='_blank'></a>";i.wrap(f)}if($(this).attr("data-gallery")){var u=t.attr("data-gallery"),h=$("[data-gallery="+u+"]"),k=h.length-1,w=[],b=[],y=[],x=t.attr("href");h.each(function(){var a=$(this);c=a.attr("href"),m=a.attr("data-caption"),imageLinkURL=a.attr("data-link"),w.push(c),b.push(m),y.push(imageLinkURL)}),galleryImageNumber=w.indexOf(x),$("#dynamic-modal").append("<span class='global-arrow prev-arrow'></span><span class='global-arrow next-arrow'></span>");var T=function(a){var t=$(".modal-image"),e=t.attr("src"),l=w.indexOf(e);if("next"==a){var o=l+1;o>k&&(o=0)}else{var o=l-1;0>o&&(o=k)}var i=w[o],n=b[o],d=y[o];if(void 0!=n)if($(".modal-image-caption-wrapper").length>0)$(".modal-image-caption").text(n);else{var r="<div class='modal-image-caption-wrapper'><span class='modal-image-caption'>"+n+"</span></div>";$(".modal-content").append(r)}else $(".modal-image-caption-wrapper").length>0&&$(".modal-image-caption-wrapper").remove();if(void 0!=d)if($(".modal-image-link").length>0)$(".modal-image-link").attr("href",d);else{var s="<a href='"+d+"' class='modal-image-link' target='_blank'></a>";$(".modal-image").wrap(s)}else if($(".modal-image-link").length>0){var m=$(".modal-image-link").contents();$(".modal-image-link").replaceWith(m)}t.attr("src",i)};$("#dynamic-modal .next-arrow").on("click",function(){T("next")}),$("#dynamic-modal .prev-arrow").on("click",function(){T("prev")})}}),$("[data-toggle=modal-video]").on("click",function(a){a.preventDefault();var t,e,l=$(this),o=l.data("source"),i=l.data("key"),n=l.data("class")||"";switch(o.toLowerCase()){case"vimeo":e="https://player.vimeo.com/video/"+i+"?autoplay=1&title=0&byline=0&portrait=0";break;case"youtube":e="https://www.youtube.com/embed/"+i+"?rel=0&amp;showinfo=0&autoplay=1";break;default:alert("The video source "+o+" is not valid")}t='<div class="modal-video-wrapper">        <iframe src="'+e+'" class="modal-video-iframe" width="720" height="405" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>        </div>',generateModalTemplate(t,"modal-video "+n)})});